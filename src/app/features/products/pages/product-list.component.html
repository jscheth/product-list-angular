<header class="app-header">
  <h1 class="app-title">Product Management</h1>
  <p class="app-subtitle">
    Manage products, pricing, and availability
  </p>
</header>

<div class="product-list-container">

  <!-- Toolbar: Search / Filter / Sort -->
  <div class="toolbar">
    <mat-form-field appearance="outline" class="toolbar-field">
      <mat-label>Search</mat-label>
      <input
        matInput
        type="text"
        placeholder="Search products..."
        [formControl]="searchControl"
      />
    </mat-form-field>

    <mat-form-field appearance="outline" class="toolbar-field">
    <mat-label>Category</mat-label>
    <mat-select [formControl]="categoryControl">
        <mat-option
        *ngFor="let category of (categories$ | async)"
        [value]="category">
        {{ category | titlecase }}
        </mat-option>
    </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="toolbar-field">
      <mat-label>Sort by</mat-label>
      <mat-select [formControl]="sortControl">
        <mat-option value="title-asc">Title (A–Z)</mat-option>
        <mat-option value="title-desc">Title (Z–A)</mat-option>
        <mat-option value="price-asc">Price (Low → High)</mat-option>
        <mat-option value="price-desc">Price (High → Low)</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Loading State -->
  <div class="state-container" *ngIf="isLoading$ | async">
    <mat-progress-spinner
      mode="indeterminate"
      diameter="50">
    </mat-progress-spinner>
  </div>

  <!-- Error State -->
  <div class="state-container error" *ngIf="(error$ | async) as error">
    <mat-icon color="warn">error</mat-icon>
    <span>{{ error }}</span>
  </div>

  <!-- Product Table -->
  <ng-container *ngIf="!(isLoading$ | async) && !(error$ | async)">
    <ng-container *ngIf="(visibleProducts$ | async) as products">

      <!-- Empty State -->
      <div class="state-container empty" *ngIf="products.length === 0">
        <mat-icon>inventory_2</mat-icon>
        <p>No products found.</p>
      </div>

    <app-product-table
    *ngIf="products.length > 0"
    [products]="products"
    (deactivate)="onDeactivateProduct($event)">
    </app-product-table>


    </ng-container>
  </ng-container>

</div>
